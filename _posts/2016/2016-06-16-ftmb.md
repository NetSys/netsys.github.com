---

title: Fault Tolerant Middlebox
layout: default

---
Middleboxes -- such as proxies, WAN Optimizers, and intrusion detection systems
(IDSes) -- are often stateful, keeping logs of active connections, port
mappings, packet caches, and other data about users, connections, and services.
When middleboxes fail, lost state can lead to reset connections, lost logs, and
security concerns. Hence, like other systems, it is desirable to design
middleboxes for high availability, with automatic failover when a device suffers
a hardware or electrical failure; such failover should ensure that no state is
lost. However, middleboxes are a challenging target for HA, first because their
state changes rapidly (sometimes even updating per-packet) and second, because
latency expectations for packet service are typically under a millisecond to
avoid inflating flow completion times. To this end, we present FTMB, a
record-and replay approach to middlebox failover which records middlebox state
without imposing a heavy latency penalty on traffic.
